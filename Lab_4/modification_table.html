<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="modification_styles.css">
    <title>Modification</title>
</head>
<body>
    <h1 id="h1_elem">This is a randomly generated multiplicity table:</h1>
    <script>
        let n_string=window.prompt("Input number n (nâˆˆ[5,20]): ","8");
        let n;
        var parent = document.getElementById("h1_elem");
        if (n_string==null || isNaN(n_string) || parseInt(n_string)<5 || parseInt(n_string)>20){
            n=8;
            let invalid_data_msg = document.createElement("p");
            invalid_data_msg.id="invalid_data_msg";
            invalid_data_msg.innerText="Provided data was invalid. Value of n has been set to: " + n;
            parent.appendChild(invalid_data_msg);
        } else {
            n=parseInt(n_string);
        }
        let table = document.createElement("table");
        table.id="mult_table";
        //let table_elem = document.getElementById("mult_table");
        parent.appendChild(table);
        const col_values = new Array(n+1);
        const row_values = new Array(n+1);
        function generateRandomNum(min, max) {
            const randomNum = Math.floor(Math.random() * (max - min + 1)) + min;
            return randomNum;
        }
        const min = 1;
        const max = 99;
        for (let i = 0; i < n; i++) {
            col_values[i]=generateRandomNum(min,max);
            row_values[i]=generateRandomNum(min,max);
        }
        for (let i = 0; i <= n; i++) {
            let table_row = document.createElement("tr");
            let row_id = "row_"+String(i);
            table_row.id = row_id;
            // let parent_row = document.getElementById(row_id);
            for (let j = 0; j <= n; j++) {
                let table_cell = document.createElement("td");
                if (i==0) {
                    table_cell.className = "header_cell";
                    if (j > 0)
                        table_cell.innerText = String(col_values[j-1]);
                } else {
                    if (j==0) {
                        table_cell.className = "header_cell";
                        table_cell.innerText = String(row_values[i-1]);
                    } else {
                        let mult_result = row_values[i-1] * col_values[j-1];
                        table_cell.innerText = String(mult_result);
                        switch(mult_result % 3) {
                            case 0:
                                table_cell.className = "mod_1";
                                break;
                            case 1:
                                table_cell.className = "mod_2";
                                break;
                            default:
                                table_cell.className = "mod_3";
                                break;
                        }
                    }
                }
                let cell_id = "cell_"+String(i)+"_"+String(j);
                table_cell.id=cell_id;
                //let cell_elem = document.getElementById(cell_id);
                table_row.appendChild(table_cell);
            }
            table.appendChild(table_row);
        }
        let legend_text = document.createElement("p");
        legend_text.id = "legend_text";
        legend_text.innerText = "Legend:"
        parent.appendChild(legend_text);
        let box_mod_1 = document.createElement("div");
        box_mod_1.id = "box_mod_1";
        box_mod_1.className = "box mod_1";
        parent.appendChild(box_mod_1);
        let box_mod_1_text = document.createElement("div");
        box_mod_1_text.id = "box_mod_1_text";
        box_mod_1_text.innerText = "- number % 3 = 0"
        box_mod_1_text.className = "box_text";
        box_mod_1.appendChild(box_mod_1_text);
        let box_mod_2 = document.createElement("div");
        box_mod_2.id = "box_mod_2";
        box_mod_2.className = "box mod_2";
        parent.appendChild(box_mod_2);
        let box_mod_2_text = document.createElement("div");
        box_mod_2_text.id = "box_mod_2_text";
        box_mod_2_text.innerText = "- number % 3 = 1"
        box_mod_2_text.className = "box_text";
        box_mod_2.appendChild(box_mod_2_text);
        let box_mod_3 = document.createElement("div");
        box_mod_3.id = "box_mod_3";
        box_mod_3.className = "box mod_3";
        parent.appendChild(box_mod_3);
        let box_mod_3_text = document.createElement("div");
        box_mod_3_text.id = "box_mod_3_text";
        box_mod_3_text.innerText = "- number % 3 = 2"
        box_mod_3_text.className = "box_text";
        box_mod_3.appendChild(box_mod_3_text);

    </script>

    
</body>
</html>